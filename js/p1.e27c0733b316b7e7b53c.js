(()=>{"use strict";class e{constructor(e){this.repos=e}buildTable(){let e=document.createElement("table");return e.className="git-repos__header",e.append(this.createTableHead()),e.append(this.createTableBody()),e}createTableHead(){let e=document.createElement("thead");e.className="git-repos__header";let t=document.createElement("tr"),n=document.createElement("td");n.className="git-repos__name",n.textContent="Name";let a=document.createElement("td");a.className="git-repos__author",a.textContent="Author";let r=document.createElement("td");return r.className="git-repos__description",r.textContent="Description",t.append(n,a,r),e.append(t),e}createTableBody(){let e=document.createElement("tbody");e.className="git-repos__body";for(const t of this.repos)e.append(this.createRepo(t));return e}createRepo(e){let t=document.createElement("tr");t.classList.add("git-repos__repo","git-repo");let n=document.createElement("a");n.className="git-repo__repolink",n.setAttribute("href",e.html_url),n.setAttribute("target","_blank"),n.textContent=e.name;let a=document.createElement("td");a.className="git-repo__name",a.append(n);let r=document.createElement("td");r.className="git-repo__author",r.innerHTML=`${e.owner.login} <br>${e.owner.id}`;let o=document.createElement("td");return o.className="git-repo__description",o.textContent=e.description,t.append(a,r,o),t}}let t=document.querySelector(".git-repos__container"),n=document.forms["fetch-repos"],a=document.createElement("h2");a.className="repo__notfound",a.textContent="Nothing has found";let r=new e([]).buildTable();t.append(r),n.addEventListener("submit",(function(t){let o=n["repo-name"],s=o.value.length<5&&"at least 5 characters";var l;if(s)return o.focus(),o.classList.add("invalid"),l=s,o.parentElement.dataset.tooltip=l,void t.preventDefault();(async function(e){let t,n=`https://api.github.com/search/repositories?q=${e}&per_page=10&page=1`;try{let a=await fetch(n,{accept:"application/vnd.github.text-match+json"});if("200"!=a.status)throw new Error(a.status+"Connection error while fetching repos by name: "+e);a=await a.json(),t=[...a.items]}catch(e){console.log(e.message)}return t})(o.value).then((n=>{if(0==n.length)return r.replaceWith(a),r=a,void t.preventDefault();let o=new e(n).buildTable();r.replaceWith(o),r=o})),t.preventDefault()}));for(const e of n.elements)e.addEventListener("input",(e=>{for(const e of n.elements)e.classList.remove("invalid"),e.parentElement.dataset.tooltip=""}));document.addEventListener("click",(function(e){if(![...n.elements].includes(e.target))for(const e of n.elements)e.classList.remove("invalid"),e.parentElement.dataset.tooltip=""}))})();